{
  "$id": "docuflow-architecture",
  "title": "DocuFlow System",
  "description": "DocuFlow is a document management system that allows users to upload, process, and store documents securely.",
  "nodes": [
    {
      "unique-id": "document-system",
      "name": "DocuFlow",
      "description": "Main document management system",
      "node-type": "system"
    },
    {
      "unique-id": "svc-upload",
      "name": "Upload Service",
      "description": "Handles user document uploads",
      "node-type": "service"
    },
    {
      "unique-id": "svc-storage",
      "name": "Storage Service",
      "description": "Stores and retrieves documents securely",
      "node-type": "service"
    },
    {
      "unique-id": "db-docs",
      "name": "Document Database",
      "description": "Stores metadata and document references",
      "node-type": "database"
    }
  ],
  "relationships": [
    {
      "unique-id": "rel-upload-to-storage",
      "description": "Upload Service sends documents to Storage Service for long-term storage",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "svc-upload"
          },
          "destination": {
            "node": "svc-storage"
          }
        }
      }
    },
    {
      "unique-id": "rel-storage-to-db",
      "description": "Storage Service stores document metadata in the Document Database",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "svc-storage"
          },
          "destination": {
            "node": "db-docs"
          }
        }
      }
    },
    {
      "unique-id": "document-system-system-is-composed-of",
      "description": "Document System contains services",
      "relationship-type": {
        "composed-of": {
          "container": "document-system",
          "nodes": [
            "svc-upload",
            "svc-storage",
            "db-docs"
          ]
        }
      }
    }
  ],
  "flows": [
    {
      "$schema": "https://calm.finos.org/draft/2024-12/meta/flow.json",
      "$id": "https://calm.finos.org/docuflow/flow/document-upload",
      "unique-id": "flow-document-upload",
      "name": "Document Upload Flow",
      "description": "Flow for uploading a document and storing metadata securely in the DocuFlow system.",
      "transitions": [
        {
          "relationship-unique-id": "rel-upload-to-storage",
          "sequence-number": 1,
          "summary": "Upload Service sends document to Storage Service"
        },
        {
          "relationship-unique-id": "rel-storage-to-db",
          "sequence-number": 2,
          "summary": "Storage Service stores document metadata in Document Database"
        }
      ]
    }
  ]
}
