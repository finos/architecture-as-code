{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://calm.finos.org/release/1.2/meta/prototype/kubernetes.decorator.schema.json",
    "title": "CALM Kubernetes Deployment Decorator Schema",
    "description": "Deployment decorator schema for Kubernetes-based deployments. Extends the base deployment decorator schema with Kubernetes-specific attributes such as cluster, namespace, and Helm chart information.",
    "allOf": [
        {
            "$ref": "https://calm.finos.org/release/1.2/meta/deployment.decorator.schema.json"
        },
        {
            "type": "object",
            "properties": {
                "data": {
                    "type": "object",
                    "properties": {
                        "kubernetes": {
                            "type": "object",
                            "description": "Kubernetes-specific deployment attributes",
                            "properties": {
                                "helm-chart": {
                                    "type": "string",
                                    "description": "Name and version of the Helm chart used for deployment",
                                    "pattern": "^[a-z0-9-]+:[0-9]+\\.[0-9]+\\.[0-9]+$"
                                },
                                "cluster": {
                                    "type": "string",
                                    "description": "Kubernetes cluster identifier where the deployment is running"
                                },
                                "namespace": {
                                    "type": "string",
                                    "description": "Kubernetes namespace for the deployment"
                                }
                            },
                            "required": [
                                "helm-chart",
                                "cluster"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "required": [
                        "kubernetes"
                    ]
                }
            }
        }
    ]
}